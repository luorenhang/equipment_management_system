# 简化版注册登录功能实现计划

## 1. 核心需求

实现基础的用户注册、登录功能，包含简单的前端界面，无需复杂的微服务架构。

## 2. 技术方案

### 2.1 后端实现

- **基于现有服务**：直接在 `equipment-service` 中添加用户管理功能
- **数据库设计**：在现有数据库中添加 `user` 表
- **认证机制**：使用简单的 token 认证，存储在内存中
- **密码加密**：使用 BCrypt 进行密码加密

### 2.2 前端实现

- **页面设计**：创建基础的登录、注册页面
- **状态管理**：使用 Pinia 管理用户登录状态
- **路由控制**：添加简单的路由守卫
- **UI组件**：使用 Element Plus 组件库

## 3. 实现步骤

### 3.1 后端实现（equipment-service）

1. **添加 User 实体类**：继承 BasicObject，包含 username, password, email 字段
2. **添加 UserMapper**：实现用户 CRUD 操作
3. **添加 UserService**：实现注册、登录逻辑
4. **添加 UserController**：提供注册登录接口
5. **修改 application.yml**：添加必要配置

### 3.2 前端实现

1. **创建登录页面**：Login.vue，包含用户名、密码输入
2. **创建注册页面**：Register.vue，包含注册表单
3. **配置路由**：添加登录、注册路由
4. **添加路由守卫**：实现未登录跳转
5. **创建用户状态管理**：使用 Pinia 管理用户信息
6. **修改 Axios 配置**：添加认证拦截器

## 4. 接口设计

- `POST /api/user/register`：用户注册
- `POST /api/user/login`：用户登录，返回 token
- `GET /api/user/info`：获取用户信息

## 5. 数据库设计

```sql
CREATE TABLE `user` (
  `id` INT(11) NOT NULL AUTO_INCREMENT,
  `username` VARCHAR(50) NOT NULL UNIQUE,
  `password` VARCHAR(100) NOT NULL,
  `email` VARCHAR(100) NOT NULL UNIQUE,
  `create_time` DATETIME NOT NULL DEFAULT CURRENT_TIMESTAMP,
  `update_time` DATETIME NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
  PRIMARY KEY (`id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4;
```

## 6. 前端页面设计

### 6.1 登录页面
- 用户名输入框
- 密码输入框
- 登录按钮
- 跳转到注册页链接

### 6.2 注册页面
- 用户名输入框
- 密码输入框
- 邮箱输入框
- 注册按钮
- 跳转到登录页链接

## 7. 文件结构

### 7.1 后端新增文件
- `equipment-service/src/main/java/edu/ngd/order/equipment/entity/User.java`
- `equipment-service/src/main/java/edu/ngd/order/equipment/mapper/UserMapper.java`
- `equipment-service/src/main/java/edu/ngd/order/equipment/service/UserService.java`
- `equipment-service/src/main/java/edu/ngd/order/equipment/controller/UserController.java`
- `equipment-service/src/main/resources/mapper/UserMapper.xml`

### 7.2 前端新增文件
- `src/views/Login.vue`：登录页面
- `src/views/Register.vue`：注册页面
- `src/stores/user.ts`：用户状态管理
- `src/api/user.ts`：用户API
- `src/types/user.ts`：用户类型定义

### 7.3 前端修改文件
- `src/router/index.ts`：添加路由和守卫
- `src/utils/axios.ts`：添加认证拦截
- `src/App.vue`：调整主布局

## 8. 预期效果

1. 用户可以通过注册页面创建新账号
2. 用户可以使用账号密码登录系统
3. 登录后可以访问系统功能，未登录用户被重定向到登录页
4. 登录状态持久化（页面刷新后保持登录）

## 9. 技术栈

- 后端：Spring Boot 2.3.12、MyBatis、MySQL、BCrypt
- 前端：Vue 3、TypeScript、Element Plus、Pinia、Axios

